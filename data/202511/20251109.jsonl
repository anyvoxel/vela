{"domain":"brooker","path":"https://brooker.co.za/blog/2025/11/02/thinking-dsql.html","title":"DSQL: Simplifying Architectures","summary":"**DSQL：简化架构，专注应用开发**\n\n**核心理念**：复杂性是可选的。Aurora DSQL 旨在通过自动化和优化数据库管理，让开发者摆脱基础设施运维负担，构建简单、可靠、高可用且成本高效的云原生应用。\n\n**关键特性与优势**：\n\n1. **Serverless（无服务器）**  \n   自动伸缩 CPU、内存与存储，无需手动管理集群、监控资源或打补丁，彻底消除运维债务。\n\n2. **按需弹性伸缩**  \n   按实际工作量计费，无负载时零费用，无需夜间缩容等复杂操作。\n\n3. **强一致性 + 简单隔离**  \n   提供单一、强一致的“强快照隔离”（类似 PostgreSQL `REPEATABLE READ`），避免读副本延迟和跨节点一致性问题，简化应用逻辑。\n\n4. **标准 SQL 支持**  \n   兼容 PostgreSQL 协议与主流 SQL 功能（事务、JOIN、DDL、索引等），保留关系型数据的表达力与并发安全。\n\n5. **自动分片与多副本**  \n   数据自动分片并跨 AZ/区域复制，隐藏底层复杂性，实现高吞吐与低延迟读写。\n\n6. **安全与简化接入**  \n   基于 AWS IAM 认证，支持 PrivateLink，无需复杂网络隔离配置。\n\n7. **极简架构设计**  \n   只需负载均衡器 + 应用层（Lambda/Fargate）+ DSQL，即可支撑从零到百万级 QPS 的全规模应用，天然三 AZ 高可用。\n\n8. **主动-主动架构（Active-Active）**  \n   无主节点设计，写入可在任意 AZ/区域本地处理，低延迟、免故障转移，提升可用性。\n\n9. **智能限制提升稳定性**  \n   - 单事务最大 10MiB 或 3,000 行：防止大事务阻塞其他请求，降低尾延迟。  \n   - 事务最长 5 分钟：避免 `VACUUM` 性能问题，保障数据清理高效。\n\n10. **无配置选项（少“旋钮”）**  \n    不提供手动调参（如副本数、分片策略），系统自动优化，降低使用门槛。\n\n11. **异步索引创建（CREATE INDEX ASYNC）**  \n    在线创建索引无停机，支持实时进度追踪，极大简化 DDL 操作。\n\n**未来规划**：\n- 已支持只读视图（用户反馈强烈）。\n- 正在评估添加外键约束、存储过程、向量支持等功能，但优先级取决于真实需求。\n- 当前重点仍是“让应用开发更简单”，而非堆砌功能。\n\n**总结**：  \nDSQL 是一个以“极简架构 + 强可靠性 + 成本效率”为核心的下一代关系型数据库，适合希望专注于业务逻辑而非数据库运维的开发者。它代表了数据库演进的方向：**把复杂留给系统，把简单留给开发者**。","published_at":"0001-01-01T00:00:00Z"}
{"domain":"muratbuffalo","path":"https://muratbuffalo.blogspot.com/2025/11/tla-modeling-of-aws-outage-dns-race.html","title":"TLA+ Modeling of AWS outage DNS race condition","summary":"2025年10月19–20日，AWS弗吉尼亚区域因DNS自动化缺陷引发DynamoDB大规模宕机，影响持续近一天。根本原因并非单一错误，而是系统性脆弱性的体现——特别是**一个关键的竞态条件**，该问题源于将“应用DNS计划”这一操作拆分为三个非原子步骤（接收、应用、清理），以提升性能与响应性。\n\n作者通过TLA+建模重现并分析了这一竞态条件：  \n- **核心机制**：计划生成器（Planner）持续推送新DNS配置；两个执行器（Enactor）从共享队列中取任务，分步处理。  \n- **竞态发生过程**：  \n  1. Enactor 1获取计划但滞留于“应用”阶段；  \n  2. Enactor 2快速完成应用并执行清理，删除旧计划；  \n  3. Enactor 1随后才完成应用，覆盖了Enactor 2刚部署的新计划；  \n  4. 当Enactor 2再次运行清理时，误删了本应生效的最新计划，违反“当前活动计划不得被删除”的安全约束。\n\n该问题本质是典型的**时间检查到时间更新（TOCTOU）漏洞**，暴露了在追求高吞吐量时牺牲原子性的风险。\n\n作者使用TLA+模型验证此场景，并提供交互式工具Spectacle供读者在线探索状态变迁轨迹。更进一步，Markus Kuppe扩展了可视化动画功能，使竞态过程可直观呈现。\n\n**关键启示**：  \n- 分布式系统设计需警惕“性能优化”带来的隐性并发风险；  \n- 模型检验（如TLA+）是发现此类深层缺陷的有效手段；  \n- 通过简化建模和可视化，能让工程师快速理解复杂系统的故障机理。\n\n\u003e ✅ 推荐给：分布式系统开发者、SRE、架构师及对形式化方法感兴趣的工程人员。","published_at":"2025-11-05T17:45:00-05:00"}
{"domain":"cloudflareblog","path":"https://blog.cloudflare.com/diy-byoip/","title":"DIY BYOIP: a new way to Bring Your Own IP prefixes to Cloudflare","summary":"**摘要：**\n\nCloudflare 推出**自助式 BYOIP API**，让客户可自主完成自有 IP 地址段的接入流程，告别过去依赖人工、耗时数周的繁琐审批（如 LOA 文件提交、多团队协调等）。新机制通过两大核心安全验证实现自动化与高效：\n\n1. **所有权验证**：支持两种方式——  \n   - 修改 IRR 路由记录（添加带验证令牌的 `cf-validation` 字段）  \n   - 配置反向 DNS（rDNS）TXT 记录（如 `cf-validation.2.0.192.in-addr.arpa`）  \n   二者均需由 IP 所有者授权，确保操作合法。\n\n2. **路由意图确认**：采用行业标准 **RPKI** 技术，通过创建 **ROA（Route Origin Authorization）**，将 Cloudflare 的 ASN（AS13335）正式授权为该 IP 前缀的发布者，实现加密可信的路由声明。\n\n为兼容全球网络运营商仍依赖 LOA 的现状，Cloudflare 自动为客户生成替代性文档，无需用户手动处理。同时，系统强制要求设置**默认服务绑定**（如 CDN/Spectrum/Magic Transit），防止 IP 被“黑洞化”（无服务处理流量），并支持后续按需分层绑定不同服务。\n\n\u003e ✅ **适用场景**：企业希望统一管理 IP 地址、提升网络控制力、实现自动化部署与迁移。  \n\u003e 🔐 **优势**：更安全（取代纸质 LOA）、更快（分钟级完成）、更可靠（基于 RPKI 和权威数据库）、更易集成（API 可编排）。\n\n未来还将推出**控制台界面**和**自助退网功能**，进一步强化 IP 资产全生命周期管理。此举标志着 Cloudflare 向“网络即代码”迈进，助力客户构建更敏捷、安全的现代网络架构。","published_at":"2025-11-07T00:00:00Z"}
{"domain":"cloudflareblog","path":"https://blog.cloudflare.com/async-quic-and-http-3-made-easy-tokio-quiche-is-now-open-source/","title":"Async QUIC and HTTP/3 made easy: tokio-quiche is now open-source","summary":"**摘要：**\n\nCloudflare正式开源 **tokio-quiche**，一个基于Rust的异步QUIC库，结合了其成熟的quiche实现与Tokio异步运行时。该库已用于支撑Apple iCloud Private Relay、Cloudflare WARP（MASQUE隧道）、Oxy下一代代理及HTTP/3测试工具h3i，可稳定处理每秒数百万级HTTP/3请求，具备低延迟、高吞吐特性。\n\n**核心亮点：**\n- **降低使用门槛**：原生quiche为sans-io设计，需手动管理UDP I/O；tokio-quiche则封装了异步IO逻辑，开发者无需“擦手”即可快速集成。\n- **Actor模型驱动**：内部采用Tokio的actor架构，通过`IoWorker`和`InboundPacketRouter`等任务实现连接管理、数据分发与协议状态机驱动。\n- **灵活抽象**：通过`ApplicationOverQuic` trait支持任意应用层协议（如HTTP/3、DNS-over-QUIC、MoQ），提供`H3Driver`简化HTTP/3开发。\n- **生产级验证**：已在Cloudflare多条产品线中长期实战检验，性能可靠。\n\n**适用场景**：构建高性能HTTP/3服务端/客户端、QUIC隧道（如WARP替代方案）、自定义隐私保护代理或实验性协议栈。\n\n**未来展望**：计划推出更易用的HTTP客户端/服务器抽象，并开放更多隐私保护服务组件。  \n👉 可在 [crates.io](https://crates.io/crates/tokio-quiche) 和 [GitHub](https://github.com/cloudflare/quiche/tree/master/tokio-quiche) 获取源码，欢迎参与构建下一代QUIC应用。","published_at":"2025-11-06T00:00:00Z"}
{"domain":"cloudflareblog","path":"https://blog.cloudflare.com/extract-audio-from-your-videos-with-cloudflare-stream/","title":"Extract audio from your videos with Cloudflare Stream","summary":"**摘要：**\n\nCloudflare Stream 推出音频提取功能，帮助开发者更高效地处理视频中的音频内容。传统视频处理成本高、复杂度大，而许多场景（如语音识别、内容审核、AI分析）仅需音频即可。新功能支持两种方式：\n\n1. **实时音频提取（Media Transformations）**：通过在 URL 中添加 `mode=audio` 参数，可从任意源视频实时提取 M4A 音频流，支持裁剪时间片段。\n2. **音频下载**：在 Stream 控制台中可直接下载独立的 M4A 音频文件，便于离线使用。\n\n配套示例展示如何结合 Workers AI 实现“音频转录 → 翻译”流程，利用 Whisper 和 M2M100 模型完成多语言处理。\n\n技术上，该功能扩展了 Cloudflare 的 VOD 与 OTFE 两条媒体处理管道，分别实现音频下载与边缘实时提取，并确保向后兼容。现已上线控制台，用户可一键下载音频。\n\n**适用人群**：需要处理音视频内容的开发者、AI 应用构建者、内容平台运营者。  \n**推荐理由**：降低计算成本，提升处理效率，专为音频驱动工作流设计。","published_at":"2025-11-06T00:00:00Z"}
{"domain":"cloudflareblog","path":"https://blog.cloudflare.com/workers-vpc-open-beta/","title":"How Workers VPC Services connects to your regional private networks from anywhere in the world","summary":"**总结：**\n\nCloudflare 推出 **Workers VPC 服务**（VPC Services），标志着其“全球虚拟私有云”愿景的首个里程碑。该功能允许 Cloudflare Workers 通过 **Cloudflare Tunnel** 安全访问部署在本地或云端（如 AWS、GCP、Azure）的私有服务（API、数据库、容器等），突破传统云锁定限制。\n\n### 核心亮点：\n- **无缝连接**：无需复杂网络配置（如 VPC 对等、安全组），只需设置一次 Tunnel，即可将私有服务注册为 Workers 的绑定服务。\n- **安全访问控制**：采用 Workers 绑定模型，仅允许访问指定服务，防止 SSRF 攻击，权限在部署时验证。\n- **全球就近路由**：请求经由 Cloudflare 全球网络，自动通过 Tunnel 路由至目标私有网络，延迟低、性能高。\n- **支持多种场景**：跨云应用、本地系统集成、开发者本地调试（通过 `cloudflared` 连接本地环境）。\n\n### 技术实现：\n1. Worker 发起 `fetch()` 请求；\n2. 通过 Cap’n Proto 协议传递请求至 Binding Worker；\n3. Iris 服务解析服务 ID，调用 Apollo 获取 Tunnel 信息；\n4. DNS 解析（A/AAAA 记录）与请求分两次发送（首次需解析，后续缓存）；\n5. 请求经 QUIC 协议通过 Tunnel Connector 发送至目标网络；\n6. 最终返回结果原路返回。\n\n### 未来规划：\n- 支持 IPsec 隧道、Cloudflare Network Interconnect、AWS Transit Gateway；\n- 扩展 TCP 服务支持（Redis、消息队列等），集成 Hyperdrive 实现连接池；\n- 提供自动生成的主机名，兼容现有 ORM 和库，提升易用性。\n\n### 适用人群：\n- 需构建跨云、分布式架构的开发者；\n- 想将边缘计算能力接入私有后端的企业；\n- 希望现代化老旧系统并利用 Workers 性能的团队。\n\n✅ **免费开放 Beta 测试**，立即体验：[https://dash.cloudflare.com/?to=/:account/workers/vpc/services](https://dash.cloudflare.com/?to=/:account/workers/vpc/services)","published_at":"2025-11-05T00:00:00Z"}
{"domain":"cloudflareblog","path":"https://blog.cloudflare.com/better-testing-for-workflows/","title":"Building a better testing experience for Workflows, our durable execution engine for multi-step applications","summary":"**总结：Cloudflare Workflows 引入隔离测试能力，大幅提升开发体验**\n\nCloudflare Workflows 是一个用于构建长时间运行、多步骤应用的无服务器执行引擎。此前，其测试依赖黑盒方式，无法查看中间步骤状态，导致调试困难。同时，启用 Workflows 会强制关闭隔离存储（isolated storage），造成测试环境污染，影响整体项目测试可靠性。\n\n为解决此问题，Cloudflare 推出全新 **隔离测试 API**（通过 `cloudflare:test` 模块），支持在本地离线环境下使用 `vitest-pool-workers` 对 Workflows 进行细粒度、可控制的测试，且不破坏测试隔离性。\n\n### 核心功能：\n- **`introspectWorkflowInstance`**：针对已知实例 ID 的单元测试，可模拟步骤结果与事件。\n- **`introspectWorkflow`**：适用于动态生成 ID 的集成测试，通过 `Proxy` 技术自动捕获并配置新创建的 Workflow 实例。\n- 支持模拟 AI 扫描、外部 API 调用、人工审批等复杂流程，实现精准断言。\n- 使用 `await using` 确保资源自动释放，保障测试隔离。\n\n### 技术亮点：\n- 基于本地 `workerd` 环境运行，通过 RPC 与 Engine DO 通信，避免侵入 Miniflare 和 Vitest 核心。\n- 利用 JavaScript `Proxy` 动态拦截 `create()`/`createBatch()`，实现对未知 ID 实例的自动监控与修改。\n\n### 适用人群：\n- 使用 Cloudflare Workflows 构建复杂工作流的开发者。\n- 注重测试质量、追求稳定 CI/CD 流程的团队。\n\n\u003e ✅ **立即开始**：升级 `@cloudflare/vitest-pool-workers` 至 0.9.0+，参考官方文档编写高效、可靠的 Workflows 测试。","published_at":"2025-11-04T00:00:00Z"}
{"domain":"cloudflareblog","path":"https://blog.cloudflare.com/fresh-insights-from-old-data-corroborating-reports-of-turkmenistan-ip/","title":"Fresh insights from old data: corroborating reports of Turkmenistan IP unblocking and firewall testing","summary":"**摘要：**\n\nCloudflare通过其Radar平台监测到2024年中旬土库曼斯坦出现大规模网络解封现象，约30亿个此前被封锁的IP地址重新可访问。数据显示，同期HTTP请求量显著上升，印证了当地“互联网赦免”传闻。\n\n进一步分析TCP连接异常（重置与超时）发现，从6月13日起，土库曼斯坦来源的未正常关闭连接比例大幅增加，且各阶段异常分布发生结构性变化。不同自治系统（AS）表现各异：  \n- **TurkmenTelecom (AS20661)**：Post-ACK异常减少，反映可能调整策略；  \n- **Ashgabat City Telephone Network (AS51495)**：Post-ACK异常几乎消失，Post-PSH和后期异常上升；  \n- **Altyn Asyr (AS59974)**：7月22日Post-ACK异常激增，可能表明防火墙在SNI阶段主动阻断连接。\n\n这些模式与国家层面测试新型防火墙的行为高度一致，但数据本身无法直接归因。需结合HTTP请求量变化综合判断——例如AS59974中异常比例上升伴随请求量骤降，提示可能是主动拦截而非网络故障。\n\n研究强调：**仅看异常数据易误读**，必须结合历史趋势（如2023年10–11月已有早期信号）和多维度指标才能形成可靠推论。Cloudflare呼吁将网络测量视为科学，持续回溯与交叉验证，以揭示真实网络动态。\n\n\u003e **推荐读者**：网络安全研究人员、政策制定者、关注网络自由与审查的技术从业者。","published_at":"2025-11-03T00:00:00Z"}
